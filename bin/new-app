#!/bin/sh
dir=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
name=$1
cmd=$2
app="$dir/../../../../"
template=$dir/../template

echo "Making directories"
mkdir $app/database;
mkdir $app/database/patches;
mkdir $app/database/models;
mkdir $app/config;
mkdir $app/cache;
mkdir $app/dictionaries;
mkdir $app/app;
mkdir $app/app/controllers;
mkdir $app/app/views;
mkdir $app/app/media;
mkdir $app/app/media/js;
mkdir $app/app/media/images;
mkdir $app/app/media/less;
mkdir $app/app/media/less/fonts;

cp $template/config/*.php $app/config/
cp $template/database/*.php $app/database/
cp $template/database/models/* $app/database/models/
cp $template/app/controllers/*.php $app/app/controllers/
cp $template/app/views/*.php $app/app/views/

cp $template/composer.json $app


echo "Retrieving recommended jquery version (1.11.1)"
wget -q https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js -O $app/app/media/js/jquery.js

echo "Building basic database"
cd $app/database/;
sqlite3 development.sqlite ".read build.sqlite.sql"

echo "-----------------------"
echo "App complete. to run this app, bin/launch $1;"
